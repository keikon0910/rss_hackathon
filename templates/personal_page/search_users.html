<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>„É¶„Éº„Ç∂„ÉºÊ§úÁ¥¢ | SNS</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Noto Sans JP', ui-sans-serif, system-ui, -apple-system,
            BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans",
            sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; }
  </style>
</head>
<body class="bg-white text-black antialiased">

  <!-- Header -->
  <header class="sticky top-0 z-10 bg-white/95 backdrop-blur border-b border-black/10">
    <div class="max-w-2xl mx-auto px-4 py-3 flex items-center gap-3">
      <a href="{{ url_for('personal_page.personal_page') }}" class="p-1 rounded-full hover:bg-black/5" aria-label="„Éû„Ç§„Éö„Éº„Ç∏">
        <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M15.75 19.5 8.25 12l7.5-7.5" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>
      <h1 class="text-base font-semibold">„É¶„Éº„Ç∂„ÉºÊ§úÁ¥¢</h1>
    </div>
  </header>

  <!-- Main -->
  <main class="max-w-2xl mx-auto px-4 py-6">
    <!-- üîç Ê§úÁ¥¢„Éï„Ç©„Éº„É† -->
    <form method="GET" class="mb-6">
      <div class="flex gap-2">
        <input type="text" name="username" value="{{ query }}" placeholder="„É¶„Éº„Ç∂„ÉºÂêç„ÇíÂÖ•Âäõ"
          class="flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
        <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
          Ê§úÁ¥¢
        </button>
      </div>
    </form>

    <!-- Ê§úÁ¥¢ÁµêÊûú -->
<!-- üîπÊ§úÁ¥¢ÁµêÊûú -->
{% if users %}
  <ul class="divide-y divide-black/10">
    {% for u in users %}
    <li class="py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
        {% if u.icon %}
          <img src="{{ u.icon }}" alt="{{ u.name }}" class="w-12 h-12 rounded-full object-cover border border-black/10">
        {% else %}
          <div class="w-12 h-12 rounded-full grid place-items-center bg-black/5 text-black/70 border border-black/10">
            <span class="text-sm font-medium">{{ u.name[0]|upper }}</span>
          </div>
        {% endif %}
        <p class="font-medium truncate">{{ u.name }}</p>
      </div>

      <!-- üîπ „Éï„Ç©„É≠„Éº„Éú„Çø„É≥ -->
      <form method="POST">
        <input type="hidden" name="follow_user_id" value="{{ u.id }}">
        {% if u.is_pending %}
          <button type="button" disabled
            class="px-3 py-1 bg-gray-300 text-black rounded-lg text-sm cursor-not-allowed">
            ÊâøË™çÂæÖ„Å°
          </button>
        {% else %}
          <button type="submit"
            class="px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm">
            „Éï„Ç©„É≠„Éº
          </button>
        {% endif %}
      </form>
    </li>
    {% endfor %}
  </ul>
{% elif query %}
  <p class="text-sm text-gray-500 mt-6">Ë©≤ÂΩì„Åô„Çã„É¶„Éº„Ç∂„Éº„ÅØ„ÅÑ„Åæ„Åõ„Çì„ÄÇ</p>
{% endif %}

  </main>
</body>
</html>
